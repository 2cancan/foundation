@import "foundation/modules";

//
// Top Bar Variables
//
$include-html-top-bar-classes: true !default;

// Background color for the top bar
$topbar-bg: #111 !default;
$topbar-gradient: true !default;
$topbar-gradient-top: lighten($topbar-bg, 20%) !default;
$topbar-gradient-bottom: $topbar-bg !default;

// Height and margin
$topbar-height: 45px !default;
$topbar-margin-bottom: emCalc(30px) !default;

// Controlling the styles for the title in the top bar
$topbar-title-color: #fff !default;
$topbar-title-weight: bold !default;
$topbar-title-font-size: emCalc(17px) !default;
$topbar-border-bottom: solid 4px $primary-color !default;
$topbar-dropdown-border-bottom: solid 4px $alert-color !default;

// Style the top bar dropdown elements
$topbar-dropdown-bg: #222 !default;
$topbar-dropdown-link-color: #fff !default;
$topbar-dropdown-link-bg: lighten($topbar-bg, 5%) !default;
$topbar-dropdown-toggle-size: 5px !default;
$topbar-dropdown-toggle-color: #fff !default;
$topbar-dropdown-toggle-alpha: 0.5 !default;

// Set the link colors and styles for top-level nav
$topbar-link-color: #fff !default;
$topbar-link-color-hover: #fff !default;
$topbar-link-color-active: #fff !default;
$topbar-link-weight: bold !default;
$topbar-link-font-size: emCalc(13px) !default;
$topbar-link-hover-lightness: -30% !default; // Darken by 30%
$topbar-link-bg-hover: darken($topbar-bg, 3%) !default;
$topbar-link-bg-active: darken($topbar-bg, 3%) !default;

$topbar-dropdown-label-color: #555 !default;
$topbar-dropdown-label-text-transform: uppercase !default;
$topbar-dropdown-label-font-weight: bold !default;
$topbar-dropdown-label-font-size: emCalc(10px) !default;

// Top menu icon styles
$topbar-menu-link-transform: uppercase !default;
$topbar-menu-link-font-size: emCalc(13px) !default;
$topbar-menu-link-weight: bold !default;
$topbar-menu-link-color: #fff !default;
$topbar-menu-icon-color: #fff !default;
$topbar-menu-link-color-toggled: #888 !default;
$topbar-menu-icon-color-toggled: #888 !default;

// Transitions and breakpoint styles
$topbar-transition-speed: 300ms !default;
$topbar-breakpoint: emCalc(940px) !default; // Change to 9999px for always mobile layout
$topbar-media-query: "only screen and (min-width: #{$topbar-breakpoint})" !default;

// Divider Styles
$topbar-divider-border-bottom: solid 1px lighten($topbar-bg, 10%) !default;
$topbar-divider-border-top: solid 1px darken($topbar-bg, 10%) !default;

// Sticky Class
$topbar-sticky-class: ".sticky" !default;

//
// Top Bar Mixins
//

// Create a gradient for the top-bar
@mixin topbar-gradient($bg-top:$topbar-gradient-top, $bg-bottom:$topbar-gradient-bottom) {
  @if $experimental {
    background: -moz-linear-gradient(top, $bg-top 0%, $bg-bottom 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,$bg-top), color-stop(100%,$bg-bottom));
    background: -webkit-linear-gradient(top, $bg-top 0%,$bg-bottom 100%);
  }
  background: linear-gradient(to bottom, $bg-top 0%,$bg-bottom 100%);
}


@if $include-html-top-bar-classes != false {

  /* Wrapped around .top-bar to contain to grid width */
  .contain-to-grid {
    width: 100%;
    background: $topbar-bg;

    .top-bar { margin-bottom: 0; }
  }

  // Wrapped around .top-bar to make it stick to the top
  .fixed {
    width: 100%;
    #{$default-float}: 0;
    position: fixed;
    top: 0;
    z-index: 99;
  }

  .top-bar {
    overflow: hidden;
    height: $topbar-height;
    line-height: $topbar-height;
    position: relative;
    margin-bottom: $topbar-margin-bottom;
    border-bottom: $topbar-border-bottom;
    @include box-sizing(content-box);
    
    // Topbar Global list Styles
    ul {
      margin-bottom: 0;
      list-style: none;
    }

    form,
    input { margin-bottom: 0; }

    .button { 
      padding-top: .5em; 
      padding-bottom: .5em; 
      margin-bottom: 0; 
    }

    // Title Area
    // 
    // You no longer need the <h1>, it was bad to assume people wanted that.
    // Just put text inside the <li class="name">.
    // If you want to make it a link, wrap the name in an anchor <a href="">Title</a>.
    //
    .title-area { 
      font-size: $em-base;
      position: relative; 
      border-bottom: $topbar-dropdown-border-bottom;
      background: $topbar-bg;
      @if $topbar-gradient { @include topbar-gradient; }
      
      .name {
        color: $topbar-title-color;
        font-weight: $topbar-title-weight;
        line-height: $topbar-height;
        padding-#{$default-float}: $topbar-height / 3;
        width: 50%; 
        
        a {
          color: $topbar-title-color;
          display: block;
          line-height: $topbar-height;
          margin-#{$default-float}: -($topbar-height / 3);
          padding-#{$default-float}: $topbar-height / 3;
        }
      }
    }
    
    // Menu toggle button on small devices
    .toggle-topbar {
      position: absolute;
      #{$opposite-direction}: 0;
      top: 0;

      a {
        color: $topbar-menu-link-color;
        font-size: $topbar-menu-link-font-size;
        font-weight: $topbar-menu-link-weight;
        height: $topbar-height;
        display: inline-block;
        line-height: $topbar-height;
        padding: 0 $topbar-height / 3;
        text-transform: $topbar-menu-link-transform;
      }

      // Add the menu icon using :before/:after on a span inside the anchor
      &.menu-icon {
        a {
          padding-right: $topbar-height / 1.1;
          position: relative;          
          span {
            margin-left: $topbar-height / 2;
            position: absolute;
            #{$opposite-direction}: $topbar-height / 3;
            top: 50%;
            margin-top: -2px;
            display: block;
            width: 16px;
            height: 2px;
            background: $topbar-menu-icon-color;
            
            &:before,
            &:after {
              content: " ";
              display: block;
              width: 16px;
              height: 2px;
              background: $topbar-menu-icon-color;
              position: relative;
            }
            &:before { top: -6px; }
            &:after { top: 4px; }
          }
        }

      }
    }

    // Change things up when the top-bar is expanded
    &.expanded { 
      height: auto;
      
      .toggle-topbar {
        a { color: $topbar-menu-link-color-toggled; }
        &.menu-icon span, 
        &.menu-icon span:before, 
        &.menu-icon span:after { background-color: $topbar-menu-icon-color-toggled; }
      }
    }
  }

  // Right and Left Navigation that stacked by default
  .top-bar-section {
    #{$default-float}: 0;
    position: relative;
    width: auto;
    @include single-transition($default-float, $topbar-transition-speed);

    ul {
      width: 100%;
      height: auto;
      display: block;
      // background: $topbar-dropdown-bg;
      font-size: $em-base;
      margin: 0;
      
      li {
        background-color: $topbar-dropdown-bg;
        // font-size: $topbar-link-font-size;
        // font-weight: $topbar-link-weight; 
        // padding: 12px 0 12px 0;
        
        & > a {
          display: block;
          color: $topbar-link-color;
          padding: 12px 0 12px 0;
          padding-#{$default-float}: $topbar-height / 3;
          font-size: $topbar-link-font-size;
          font-weight: $topbar-link-weight;
          // background-color: $topbar-dropdown-bg;

          &.button {
            background: $primary-color;
            font-size: $topbar-link-font-size;
            &.hover {
              background: darken($primary-color, 10%);
            }
          }
          &.button.secondary {
            background: $secondary-color;
            &.hover {
              background: darken($secondary-color, 10%);
            }
          }
          &.button.success {
            background: $success-color;
            &.hover {
              background: darken($success-color, 10%);
            }
          }
          &.button.alert {
            background: $alert-color;
            &.hover {
              background: darken($alert-color, 10%);
            }
          }

        }

        // Apply the hover link color when it has that class
        &.hover > a {
          background-color: $topbar-link-bg-hover;
          color: $topbar-link-color-hover;
        }

        // Apply the active link color when it has that class
        &.active > a {
          background-color: $topbar-link-bg-active;
          color: $topbar-link-color-active;
        }
      }
    }


    .divider,
    [role="separator"] {
      border-bottom: $topbar-divider-border-bottom;
      border-top: $topbar-divider-border-top;
      clear: both;
      height: 1px;
      width: 100%;
      padding: 0;
    }

    // Add some extra padding for list items contains buttons
    // .has-form { padding: $topbar-height / 3; }

    // Styling for list items that have a dropdown within them.
    .has-dropdown {
      position: relative;

      & > a {
        &:after {
          @include css-triangle($topbar-dropdown-toggle-size, rgba($topbar-dropdown-toggle-color, $topbar-dropdown-toggle-alpha), $default-float);
          margin-#{$opposite-direction}: $topbar-height / 3;
          margin-top: -($topbar-dropdown-toggle-size / 2) - 2;
          position: absolute;
          top: 50%;
          #{$opposite-direction}: 0;
        }
      }

      &.moved { position: static;
        & > .dropdown {
          visibility: visible;
        }
      }
    }

    // Styling elements inside of dropdowns
    .dropdown {
      position: absolute;
      #{$default-float}: 100%;
      top: 0;
      visibility: hidden;
      z-index: 99;

      li {
        width: 100%;
        height: auto;

        a {
          font-weight: normal;
          padding: 8px $topbar-height / 3;
        }

        &.title h5 { margin-bottom: 0;
          a {
            color: $topbar-link-color;
            line-height: $topbar-height / 2;
            display: block;
          }
        }
      }

      label {
        padding: 8px $topbar-height / 3 2px;
        margin-bottom: 0;
        text-transform: $topbar-dropdown-label-text-transform;
        color: $topbar-dropdown-label-color;
        font-weight: $topbar-dropdown-label-font-weight;
        font-size: $topbar-dropdown-label-font-size;
      }
    }
  }

  // Element that controls breakpoint, no need to change this ever
  .top-bar-js-breakpoint {
    width: $topbar-breakpoint !important;
    visibility: hidden;
  }
  .js-generated { display: block; }


  // Top Bar styles intended for screen sizes above the breakpoint.
//   @media #{$topbar-media-query} {
//     .top-bar {
//       background: $topbar-bg;
//       @include clearfix;
//       overflow: visible;

//       .toggle-topbar { display: none; }

//       .title-area { float: $default-float; }
//       .name h1 a { width: auto; }

//       input,
//       .button {
//         line-height: 2em;
//         font-size: emCalc(14px);
//         height: 2em;
//         padding: 0 10px;
//         position: relative;
//         top: 8px;
//       }

//       &.expanded { background: $topbar-bg; }
//     }

//     .contain-to-grid .top-bar {
//       max-width: $row-width;
//       margin: 0 auto;
//     }

//     .top-bar-section {
//       @include single-transition(none,0,0);
//       #{$default-float}: 0 !important;

//       ul {
//         width: auto;
//         height: auto !important;
//         display: inline;

//         li {
//           float: $default-float;
//           .js-generated { display: none; }
//         }
//       }

//       li {
//         a:not(.button) {
//           padding: 0 $topbar-height / 3;
//           line-height: $topbar-height;
//           background: $topbar-bg;
//           &.hover { background: adjust-color($topbar-dropdown-bg, $lightness: $topbar-link-hover-lightness); }
//         }
//       }

//       .has-dropdown {
//         & > a {
//           padding-#{$opposite-direction}: $topbar-height / 3 + 20 !important;

//           &:after {
//             @include css-triangle($topbar-dropdown-toggle-size, rgba($topbar-dropdown-toggle-color, $topbar-dropdown-toggle-alpha), top);
//             margin-top: -($topbar-dropdown-toggle-size / 2);
//             top: $topbar-height / 2;
//           }
//         }

//         &.moved { position: relative;
//           & > .dropdown { visibility: hidden; }
//         }

//         &.hover {
//           & > .dropdown {
//             visibility: visible;
//           }
//         }

//         .dropdown li.has-dropdown {
//           & > a {
//             &:after {
//               border: none;
//               content: "\00bb";
//               margin-top: -16px;
//               #{$opposite-direction}: 5px;
//             }
//           }
//         }

//       }

//       .dropdown {
//         #{$default-float}: 0;
//         top: auto;
//         background: transparent;
//         min-width: 100%;

//         li {
//           a {
//             color: $topbar-dropdown-link-color;
//             line-height: 1;
//             white-space: nowrap;
//             padding: 7px $topbar-height / 3;
//             background: $topbar-dropdown-link-bg;
//           }

//           label {
//             white-space: nowrap;
//             background: lighten($topbar-bg, 5%);
//           }

//           // Second Level Dropdowns
//           .dropdown {
//             #{$default-float}: 100%;
//             top: 0;
//           }
//         }
//       }

//       & > ul > .divider,
//       & > ul > [role="separator"] {
//         border-bottom: none;
//         border-top: none;
//         border-#{$opposite-direction}: $topbar-divider-border-bottom;
//         border-#{$default-float}: $topbar-divider-border-top;
//         clear: none;
//         height: $topbar-height;
//         width: 0px;
//       }

//       .has-form {
//         background: $topbar-bg;
//         padding: 0 $topbar-height / 3;
//         height: $topbar-height;
//       }

//       // Position overrides for ul.right
//       ul.right {
//         li .dropdown {
//           left: auto;
//           right: 0;

//           li .dropdown { right: 100%; }
//         }
//       }
//     }

//     // Degrade gracefully when Javascript is disabled. Displays dropdown and changes
//     // background & text color on hover.
//     .no-js .top-bar-section {
// 	  ul li {
//         // Apply the hover link color when it has that class
//         &:hover > a {
//           background: $topbar-link-bg-hover;
//           color: $topbar-link-color-hover;
//         }

//         // Apply the active link color when it has that class
//         &:active > a {
//           background: $topbar-link-bg-active;
//           color: $topbar-link-color-active;
//         }
//       }

// 	  .has-dropdown {
//         &:hover {
//           & > .dropdown {
//             visibility: visible;
//           }
//         }
// 	  }
// 	}
//   }

}
